@model EmailTemplate.Add

<div class="table-section">
    <div class="page-header pt-2">
        <div class="page-leftheader mx-2">
            <h4 class="page-title">Email Template Details</h4>
        </div>

    </div>

    <div class="card">

        <div class="x_panel">
            <div class="card-body">




                @using (Ajax.BeginForm("EmailTemplateAdd", "Tools",
                 new { src = ViewBag.src },
                  new AjaxOptions { HttpMethod = "POST", OnSuccess = "OnSuccess", OnBegin = "ShowLoadingDialog()" },
                     new { @id = "EmailTemplateAddForm", @enctype = "multipart/form-data" })
             )
                {
                    @Html.HiddenFor(x => Model.TemplateID)
                    <div class="row">
                        <div class="col-lg-4 col-md-4 col-sm-4 form-group">
                            <label>Template Name<sup>*</sup></label>
                            @if (Model.TemplateID > 0)
                            {
                                @Html.TextBoxFor(model => model.TemplateName, new { @class = "form-control", @readonly = "true" });
                                @Html.ValidationMessageFor(model => model.TemplateName, "", new { @class = "text-danger" })
                            }
                            else
                            {
                                @Html.TextBoxFor(model => model.TemplateName, new { @class = "form-control" })
                                @Html.ValidationMessageFor(model => model.TemplateName, "", new { @class = "text-danger" })
                            }
                        </div>
                        <div class="col-lg-4 col-md-4 col-sm-4 form-group">
                            <label>CC Mail</label>
                            @Html.TextBoxFor(model => model.CCMail, new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => model.CCMail, "", new { @class = "text-danger" })
                        </div>
                        <div class="col-lg-4 col-md-4 col-sm-4 form-group">
                            <label>BCC Mail</label>
                            @Html.TextBoxFor(model => model.BCCMail, new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => model.BCCMail, "", new { @class = "text-danger" })
                        </div>

                    </div>
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                            <label>Subject<sup>*</sup></label>
                            @Html.TextBoxFor(model => model.Subject, new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => model.Subject, "", new { @class = "text-danger" })
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                            <label>Repository</label>
                            @Html.TextAreaFor(model => model.Repository, new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => model.Repository, "", new { @class = "text-danger" })
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                            <label>SMS Body</label>
                            @Html.TextAreaFor(model => model.SMSBody, new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => model.SMSBody, "", new { @class = "text-danger" })
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-sm-12 form-group">
                            <label>Body </label>
                            @Html.TextAreaFor(model => model.Body, new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => model.Body, "", new { @class = "text-danger" })

                        </div>
                    </div>
                    <div class="row mx-1">

                        @if (Model.TemplateID > 0)
                        {
                            <button type="submit" class="btn client-save btn-primary" name="Command" value="Add">Update</button>
                        }
                        else
                        {
                            <button type="submit" class="btn client-save btn-primary" name="Command" value="Add"> Submit</button>
                        }
                        <button type="button" class="btn client-save btn-reject" onclick="ShowLoadingDialog(); window.location = '@Url.Action("EmailTemplateList",new { src = ClsCommon.Encrypt(ViewBag.MenuID+"*"+"/Tools/EmailTemplateList") })';"> Cancel</button>


                    </div>

                }

            </div>
        </div>
    </div>
    </div>
    @section scripts    {

        @System.Web.Optimization.Scripts.Render("~/bundle/unobtrusivejs")

        @Html.IncludeVersionedJs(Url.Content("~/ckeditor/ckeditor.js"))

        <script>
            CKEDITOR.replace("Body");

            function OnSuccess(obj) {
                if (obj.Status) {
                    SuccessToaster(obj.SuccessMessage);
                    window.location.href = obj.RedirectURL;
                }
                else {
                    CloseLoadingDialog();
                    FailToaster(obj.SuccessMessage);

                }
            }

        </script>
    }
